<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Validify: Web3 Discord Security Protocol</title>
    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #ffffff;
            overflow-x: hidden;
        }

        .matrix-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            opacity: 0.1;
            z-index: 0;
        }

        .container {
            position: relative;
            z-index: 1;
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            padding: 30px;
            background: rgba(0, 0, 0, 0.6);
            border-radius: 20px;
            margin-bottom: 30px;
            border: 3px solid #00ff88;
            box-shadow: 0 0 40px rgba(0, 255, 136, 0.3);
        }

        h1 {
            font-size: 3.5em;
            background: linear-gradient(45deg, #00ff88, #00d4ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .tagline {
            font-size: 1.3em;
            color: #00d4ff;
            margin-bottom: 5px;
        }

        .subtitle {
            color: #aaa;
            font-size: 0.95em;
            margin-bottom: 15px;
        }

        .wallet-section {
            display: flex;
            gap: 15px;
            justify-content: center;
            align-items: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .wallet-btn {
            background: linear-gradient(135deg, #00ff88, #00d4ff);
            color: #000;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-weight: bold;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s;
        }

        .wallet-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(0, 255, 136, 0.7);
        }

        .wallet-btn:disabled {
            background: #555;
            cursor: not-allowed;
            opacity: 0.5;
        }

        .wallet-info {
            background: rgba(0, 0, 0, 0.8);
            padding: 15px 25px;
            border-radius: 10px;
            border: 2px solid #00ff88;
            display: none;
        }

        .wallet-info.connected {
            display: block;
        }

        .wallet-address {
            color: #00ff88;
            font-family: 'Courier New', monospace;
            font-size: 1.1em;
        }

        .balance-display {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 15px;
        }

        .balance-item {
            background: rgba(0, 255, 136, 0.1);
            padding: 10px;
            border-radius: 8px;
            text-align: center;
        }

        .balance-label {
            font-size: 0.85em;
            color: #00d4ff;
            margin-bottom: 5px;
        }

        .balance-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #00ff88;
        }

        .feature-badge {
            display: inline-block;
            background: linear-gradient(135deg, #667eea, #764ba2);
            padding: 8px 16px;
            border-radius: 20px;
            margin: 5px;
            font-size: 0.85em;
            border: 1px solid #00ff88;
        }

        .service-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .panel {
            background: rgba(0, 0, 0, 0.7);
            border: 2px solid #00ff88;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
        }

        .panel h2 {
            color: #00ff88;
            margin-bottom: 20px;
            font-size: 1.8em;
            border-bottom: 2px solid #00ff88;
            padding-bottom: 10px;
        }

        .service-grid-items {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .service-card {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.3), rgba(118, 75, 162, 0.3));
            border: 3px solid #667eea;
            border-radius: 15px;
            padding: 20px;
            transition: all 0.3s;
            position: relative;
        }

        .service-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.5);
            border-color: #00ff88;
        }

        .service-tier {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #00ff88;
            color: #000;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.75em;
            font-weight: bold;
        }

        .service-icon {
            width: 100%;
            height: 120px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 10px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3em;
        }

        .service-title {
            color: #00d4ff;
            font-weight: bold;
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .service-description {
            color: #ccc;
            font-size: 0.9em;
            margin-bottom: 15px;
            line-height: 1.4;
        }

        .service-features {
            margin: 15px 0;
        }

        .service-feature {
            color: #00ff88;
            font-size: 0.85em;
            margin: 5px 0;
            padding-left: 15px;
            position: relative;
        }

        .service-feature:before {
            content: '‚úì';
            position: absolute;
            left: 0;
            color: #00ff88;
        }

        .service-pricing {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
        }

        .price-token {
            font-size: 1.3em;
            font-weight: bold;
            color: #00ff88;
        }

        .activate-btn {
            background: linear-gradient(135deg, #00ff88, #00d4ff);
            color: #000;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .activate-btn:hover:not(:disabled) {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.7);
        }

        .activate-btn:disabled {
            background: #555;
            cursor: not-allowed;
            opacity: 0.6;
        }

        .transaction-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .transaction-modal.show {
            display: flex;
        }

        .modal-content {
            background: linear-gradient(135deg, #667eea, #764ba2);
            padding: 40px;
            border-radius: 20px;
            border: 3px solid #00ff88;
            max-width: 500px;
            text-align: center;
        }

        .spinner {
            border: 5px solid rgba(255, 255, 255, 0.3);
            border-top: 5px solid #00ff88;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-box {
            background: linear-gradient(135deg, rgba(0, 255, 136, 0.2), rgba(0, 212, 255, 0.2));
            border: 2px solid #00ff88;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }

        .stat-label {
            font-size: 0.9em;
            color: #00d4ff;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 2.5em;
            font-weight: bold;
            color: #00ff88;
        }

        .action-btn {
            background: linear-gradient(135deg, #00ff88, #00d4ff);
            color: #000;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-weight: bold;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
            margin: 5px 0;
        }

        .action-btn:hover:not(:disabled) {
            transform: scale(1.02);
            box-shadow: 0 0 25px rgba(0, 255, 136, 0.7);
        }

        .action-btn:disabled {
            background: #555;
            cursor: not-allowed;
            opacity: 0.5;
        }

        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 255, 136, 0.95);
            color: #000;
            padding: 15px 25px;
            border-radius: 10px;
            font-weight: bold;
            display: none;
            z-index: 1001;
            animation: slideInRight 0.3s;
            max-width: 300px;
        }

        .toast.show {
            display: block;
        }

        .toast.error {
            background: rgba(255, 68, 68, 0.95);
            color: white;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .token-panel {
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid #00d4ff;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .network-indicator {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85em;
            margin: 5px;
        }

        .network-mainnet {
            background: #00ff88;
            color: #000;
        }

        .network-testnet {
            background: #ffaa00;
            color: #000;
        }

        .contract-info {
            background: rgba(0, 0, 0, 0.6);
            border: 1px solid #00ff88;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
        }

        .contract-address {
            color: #00d4ff;
            word-break: break-all;
        }

        .info-box {
            background: rgba(0, 255, 136, 0.1);
            border-left: 4px solid #00ff88;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .info-box h3 {
            color: #00ff88;
            margin-bottom: 10px;
        }

        .info-box ul {
            color: #ccc;
            font-size: 0.9em;
            line-height: 1.8;
            list-style-position: inside;
        }

        @media (max-width: 1024px) {
            .service-grid {
                grid-template-columns: 1fr;
            }
            
            .service-grid-items {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }
        }
    </style>
</head>
<body>
    <canvas class="matrix-bg" id="matrix"></canvas>
    <div class="toast" id="toast"></div>

    <div class="transaction-modal" id="txModal">
        <div class="modal-content">
            <h2 style="color: #00ff88; margin-bottom: 20px;">Processing Transaction</h2>
            <div class="spinner"></div>
            <p id="txStatus">Waiting for confirmation...</p>
            <p style="margin-top: 15px; font-size: 0.9em; color: #ccc;" id="txHash"></p>
        </div>
    </div>
    
    <div class="container">
        <header>
            <h1>üõ°Ô∏è VALIDIFY</h1>
            <p class="tagline">Enterprise Discord Security Protocol for Web3 Projects</p>
            <p class="subtitle">Blockchain-Powered Bot Protection & Community Verification System</p>
            
            <div>
                <span class="feature-badge">üîó Live on Sepolia Testnet</span>
                <span class="feature-badge">üé® Real Smart Contracts</span>
                <span class="feature-badge">‚ö° Blockchain Verified</span>
                <span class="feature-badge">üí∞ VLFY Token Active</span>
            </div>

            <div class="wallet-section">
                <button class="wallet-btn" id="connectBtn" onclick="connectWallet()">
                    ü¶ä Connect MetaMask
                </button>
                <div class="wallet-info" id="walletInfo">
                    <div class="wallet-address" id="walletAddress"></div>
                    <span class="network-indicator" id="networkIndicator"></span>
                    <div class="balance-display">
                        <div class="balance-item">
                            <div class="balance-label">ETH Balance</div>
                            <div class="balance-value" id="ethBalance">0.00</div>
                        </div>
                        <div class="balance-item">
                            <div class="balance-label">VLFY Tokens</div>
                            <div class="balance-value" id="tokenBalance">0</div>
                        </div>
                        <div class="balance-item">
                            <div class="balance-label">Active Services</div>
                            <div class="balance-value" id="serviceCount">0</div>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <div class="service-grid">
            <div>
                <div class="panel">
                    <h2>üîê Security Service Tiers</h2>
                    
                    <div class="service-grid-items">
                        <div class="service-card">
                            <div class="service-tier">BASIC</div>
                            <div class="service-icon">üõ°Ô∏è</div>
                            <div class="service-title">Basic Shield Protection</div>
                            <div class="service-description">Foundational security for Discord servers with automated bot verification.</div>
                            <div class="service-features">
                                <div class="service-feature">24/7 Bot Monitoring</div>
                                <div class="service-feature">Spam Detection</div>
                                <div class="service-feature">Basic Role Verification</div>
                                <div class="service-feature">Weekly Security Reports</div>
                            </div>
                            <div class="service-pricing">
                                <span class="price-token">500 VLFY/mo</span>
                                <button class="activate-btn" onclick="activateService(1, 500)" id="basicBtn">Activate</button>
                            </div>
                        </div>

                        <div class="service-card">
                            <div class="service-tier">ADVANCED</div>
                            <div class="service-icon">‚öîÔ∏è</div>
                            <div class="service-title">Advanced Defense System</div>
                            <div class="service-description">Enhanced protection with wallet verification and real-time threats.</div>
                            <div class="service-features">
                                <div class="service-feature">Wallet Verification</div>
                                <div class="service-feature">NFT-Gated Channels</div>
                                <div class="service-feature">Real-Time Alerts</div>
                                <div class="service-feature">Priority Support</div>
                            </div>
                            <div class="service-pricing">
                                <span class="price-token">1,500 VLFY/mo</span>
                                <button class="activate-btn" onclick="activateService(2, 1500)" id="advancedBtn">Activate</button>
                            </div>
                        </div>

                        <div class="service-card">
                            <div class="service-tier">ENTERPRISE</div>
                            <div class="service-icon">üíé</div>
                            <div class="service-title">Enterprise Protection Suite</div>
                            <div class="service-description">Complete security with analytics and dedicated support.</div>
                            <div class="service-features">
                                <div class="service-feature">Advanced Analytics</div>
                                <div class="service-feature">Custom Integration</div>
                                <div class="service-feature">Multi-Server Management</div>
                                <div class="service-feature">24/7 Dedicated Team</div>
                            </div>
                            <div class="service-pricing">
                                <span class="price-token">5,000 VLFY/mo</span>
                                <button class="activate-btn" onclick="activateService(3, 5000)" id="enterpriseBtn">Activate</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="panel" style="margin-top: 20px;">
                    <h2>üìã Live Smart Contracts</h2>
                    <div class="contract-info">
                        <strong style="color: #00ff88;">VLFY Token Contract (ERC-20):</strong><br>
                        <span class="contract-address">0x813986e8908560FDD2Eda4DE2aF10623ae845b2f</span>
                        <br><br>
                        <a href="https://sepolia.etherscan.io/address/0x813986e8908560FDD2Eda4DE2aF10623ae845b2f" target="_blank" style="color: #00d4ff;">View on Etherscan ‚Üí</a>
                    </div>
                    <div class="contract-info">
                        <strong style="color: #00ff88;">Service Manager Contract:</strong><br>
                        <span class="contract-address">0x976b419eA3aB69F643F9Bba82007D58dA275f966</span>
                        <br><br>
                        <a href="https://sepolia.etherscan.io/address/0x976b419eA3aB69F643F9Bba82007D58dA275f966" target="_blank" style="color: #00d4ff;">View on Etherscan ‚Üí</a>
                    </div>
                    
                    <button class="action-btn" onclick="addTokenToWallet()">
                        ‚ûï Add VLFY Token to MetaMask
                    </button>
                    
                    <div class="info-box" style="margin-top: 20px;">
                        <h3>üî• Live on Sepolia Testnet</h3>
                        <ul>
                            <li>Real smart contracts deployed</li>
                            <li>All transactions recorded on blockchain</li>
                            <li>Free to test with Sepolia ETH</li>
                            <li>Fully functional token & subscription system</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div>
                <div class="panel">
                    <h2>üí∞ Token Management</h2>
                    
                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-label">Your VLFY</div>
                            <div class="stat-value" id="userTokens">0</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Can Claim</div>
                            <div class="stat-value" id="canClaim">No</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Next Claim</div>
                            <div class="stat-value" style="font-size: 1.2em;" id="nextClaim">24h</div>
                        </div>
                    </div>

                    <div class="token-panel">
                        <h3 style="color: #00d4ff; margin-bottom: 15px;">Get VLFY Tokens</h3>
                        <p style="color: #888; font-size: 0.9em; margin-bottom: 15px;">Claim 10,000 VLFY from the faucet (once per 24 hours)</p>
                        
                        <button class="action-btn" onclick="claimFaucet()" id="faucetBtn">
                            üíß Claim Faucet (10,000 VLFY)
                        </button>
                        
                        <div style="margin-top: 15px; padding: 10px; background: rgba(0, 212, 255, 0.1); border-radius: 5px; font-size: 0.9em;">
                            <strong style="color: #00d4ff;">‚ÑπÔ∏è Faucet Info:</strong><br>
                            ‚Ä¢ Claim 10,000 VLFY tokens<br>
                            ‚Ä¢ Available every 24 hours<br>
                            ‚Ä¢ Completely free (testnet)
                        </div>
                    </div>

                    <div class="info-box" style="margin-top: 20px;">
                        <h3>VLFY Token Utility</h3>
                        <ul>
                            <li>Pay for security subscriptions</li>
                            <li>Access premium features</li>
                            <li>Standard ERC-20 token</li>
                            <li>Transferable between wallets</li>
                        </ul>
                    </div>
                </div>

                <div class="panel" style="margin-top: 20px;">
                    <h2>üìä Your Subscription</h2>
                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-label">Active Tier</div>
                            <div class="stat-value" style="font-size: 1.2em;" id="activeTier">None</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Expires In</div>
                            <div class="stat-value" style="font-size: 1.5em;" id="expiresIn">--</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Status</div>
                            <div class="stat-value" style="font-size: 1.2em;" id="subStatus">Inactive</div>
                        </div>
                    </div>

                    <button class="action-btn" onclick="checkSubscription()" style="margin-top: 15px;">
                        üîÑ Refresh Subscription Status
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // REAL CONTRACT ADDRESSES - DEPLOYED ON SEPOLIA
        const CONTRACTS = {
            token: '0x813986e8908560FDD2Eda4DE2aF10623ae845b2f',
            serviceManager: '0x976b419eA3aB69F643F9Bba82007D58dA275f966'
        };

        // Contract ABIs
        const TOKEN_ABI = [
            "function balanceOf(address owner) view returns (uint256)",
            "function claimFaucet() external",
            "function canClaimFaucet(address user) view returns (bool)",
            "function timeUntilNextClaim(address user) view returns (uint256)",
            "function approve(address spender, uint256 amount) returns (bool)",
            "function allowance(address owner, address spender) view returns (uint256)"
        ];

        const SERVICE_ABI = [
            "function activateService(uint8 tier) external",
            "function hasActiveSubscription(address user) view returns (bool)",
            "function getSubscription(address user) view returns (uint8 tier, uint256 expiresAt, uint256 activatedAt, bool isActive, uint256 daysRemaining)",
            "function getServicePrice(uint8 tier) view returns (uint256)",
            "function basicPrice() view returns (uint256)",
            "function advancedPrice() view returns (uint256)",
            "function enterprisePrice() view returns (uint256)"
        ];

        // Web3 State
        let web3State = {
            provider: null,
            signer: null,
            address: null,
            chainId: null,
            connected: false,
            tokenContract: null,
            serviceContract: null
        };

        // Matrix background
        const canvas = document.getElementById('matrix');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const matrix = "VALIDIFY01";
        const fontSize = 16;
        const columns = canvas.width / fontSize;
        const drops = [];

        for (let i = 0; i < columns; i++) {
            drops[i] = 1;
        }

        function drawMatrix() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = '#00ff88';
            ctx.font = fontSize + 'px monospace';

            for (let i = 0; i < drops.length; i++) {
                const text = matrix[Math.floor(Math.random() * matrix.length)];
                ctx.fillText(text, i * fontSize, drops[i] * fontSize);

                if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
                    drops[i] = 0;
                }
                drops[i]++;
            }
        }

        setInterval(drawMatrix, 35);

        // Connect Wallet
        async function connectWallet() {
            try {
                if (!window.ethereum) {
                    showToast('MetaMask not detected. Please install MetaMask extension.', true);
                    setTimeout(() => {
                        window.open('https://metamask.io/download/', '_blank');
                    }, 2000);
                    return;
                }

                const accounts = await window.ethereum.request({ 
                    method: 'eth_requestAccounts' 
                });

                if (!accounts || accounts.length === 0) {
                    showToast('No accounts found. Please unlock MetaMask.', true);
                    return;
                }

                web3State.provider = new ethers.providers.Web3Provider(window.ethereum);
                web3State.signer = web3State.provider.getSigner();
                web3State.address = accounts[0];

                const network = await web3State.provider.getNetwork();
                web3State.chainId = network.chainId;

                // Check if on Sepolia
                if (web3State.chainId !== 11155111) {
                    showToast('Please switch to Sepolia Testnet in MetaMask!', true);
                    try {
                        await window.ethereum.request({
                            method: 'wallet_switchEthereumChain',
                            params: [{ chainId: '0xaa36a7' }], // Sepolia chainId in hex
                        });
                    } catch (switchError) {
                        showToast('Faile
